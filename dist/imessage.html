<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>iMessage (sms)</title>
    <meta name="description" content="Native communication app for iOS">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style type="text/css">body {
    background: #DADADA;
    font-family: sans-serif;
}
</style>

    <!-- webapp icon links added here at runtime -->
</head>
<body>
<!-- app name and image -->
<div class="app">
    <h1>iMessage (sms)</h1>
    <img id="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MCA2MCI+PGc+PGNpcmNsZSBjbGFzcz0icmluZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIzMCIgY3k9IjMwIiByPSIzIi8+PGNpcmNsZSBjbGFzcz0icmluZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIzMCIgY3k9IjMwIiByPSI5Ii8+PGNpcmNsZSBjbGFzcz0icmluZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIzMCIgY3k9IjMwIiByPSIxOCIvPjxjaXJjbGUgY2xhc3M9InJpbmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzIiBjeD0iMzAiIGN5PSIzMCIgcj0iMjciLz48L2c+Cjwvc3ZnPg==" width="180" height="180" />

    <p>This page, when saved to your homescreen, will attempt to open the app with the deeplink sms:</p>

    <!-- info message -->
    <p class="info message">If you are seeing this page, it means that the webicon links have not been enabled, or your cache has been cleared recently. <a href="/">Go back to the main page to enable</a></p>
</div>

<div id="data">
    <!-- data is picked up from the svg image, then used to create the icon image links -->
    <!-- <img id="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MCA2MCI+PGc+PGNpcmNsZSBjbGFzcz0icmluZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIzMCIgY3k9IjMwIiByPSIzIi8+PGNpcmNsZSBjbGFzcz0icmluZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIzMCIgY3k9IjMwIiByPSI5Ii8+PGNpcmNsZSBjbGFzcz0icmluZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjMiIGN4PSIzMCIgY3k9IjMwIiByPSIxOCIvPjxjaXJjbGUgY2xhc3M9InJpbmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzIiBjeD0iMzAiIGN5PSIzMCIgcj0iMjciLz48L2c+Cjwvc3ZnPg==" width="180" height="180" /> -->
</div>

<script type="text/javascript">(function() {

var $head = document.head,
    $img = document.querySelector('img#icon');

var sizes = [
    '60x60',
    '76x76',
    '120x120',
    '152x152',
    '180x180',
];

window.onload = function() {
    var $canvas = document.createElement("canvas");
    var ctx = $canvas.getContext('2d'),
        dataURL,
        parsedSize,
        width, height,
        link;

    sizes.forEach(function(sizeRaw) {
        parsedSize = sizeRaw.split('x').map(Number);

        width = parsedSize[0];
        height = parsedSize[1];

        $canvas.width = width;
        $canvas.height = height;

        ctx.fillStyle = '#FFF';
        ctx.fillRect(0, 0, width, height);
        ctx.drawImage($img, 0, 0);
        dataURL = $canvas.toDataURL("image/png");

        link = document.createElement('link');
        link.setAttribute('rel', 'apple-touch-icon-precomposed');
        link.setAttribute('sizes', sizeRaw);
        link.setAttribute('href', dataURL);
        $head.appendChild(link);
    });
};

}());
</script>
</body>
</html>
